<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Flip Card Slideshow (28) + Progress</title>
<style>
  :root { --card-max-w: 90vw; --card-max-h: 90vh; }

  body {
    margin: 0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, sans-serif;
    background: url('forest-background.jpg') center center / cover no-repeat fixed;
    min-height: 100vh;
    display: grid;
    place-items: center;
    touch-action: pan-y;
  }

  .slideshow-wrap {
    position: relative;
    width: min(900px, var(--card-max-w));
    max-height: var(--card-max-h);
    background: rgba(255,255,255,.9);
    border-radius: 16px;
    box-shadow: 0 6px 24px rgba(0,0,0,.2);
    padding: 72px 16px 24px;
    box-sizing: border-box;
    overflow: hidden;
  }

  /* Top bar */
  .top-bar {
    position: absolute;
    inset: 8px 12px auto 12px;
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    gap: 12px;
    z-index: 5;
  }

  .btn {
    appearance: none;
    border: 0;
    padding: 10px 14px;
    border-radius: 12px;
    background: #111;
    color: #fff;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,.2);
    justify-self: center;
  }
  .btn:active { transform: translateY(1px); }

  /* Progress */
  .progress-wrap {
    grid-column: 1 / -1;
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: center;
    gap: 8px;
    margin-top: 8px;
  }
  .progress-rail {
    height: 8px;
    background: rgba(0,0,0,.12);
    border-radius: 999px;
    overflow: hidden;
  }
  .progress-bar {
    height: 100%;
    width: 0%;
    background: #111;
    border-radius: 999px;
    transition: width 200ms ease;
  }
  .progress-text {
    font-weight: 700;
    font-variant-numeric: tabular-nums;
    color: #111;
    padding: 0 6px;
    min-width: 90px;
    text-align: right;
  }

  /* Navigation */
  .nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    padding: 12px 14px;
    background: rgba(0,0,0,.5);
    color: #fff;
    font-size: 24px;
    font-weight: 700;
    border-radius: 10px;
    cursor: pointer;
    user-select: none;
    z-index: 4;
  }
  .nav.prev { left: 8px; }
  .nav.next { right: 8px; }

  /* Slide & flip card */
  .slide { display: none; }
  .slide.active { display: block; }

  .card {
    margin: 0 auto;
    width: 100%;
    max-width: 900px;
    aspect-ratio: 3 / 2;
    perspective: 1200px;
  }
  .card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
    transition: transform 400ms ease;
    will-change: transform;
  }
  .card.flipped .card-inner { transform: rotateY(180deg); }

  .face {
    position: absolute;
    inset: 0;
    backface-visibility: hidden;
    display: grid;
    place-items: center;
    overflow: hidden;
    background: #fff;
    border-radius: 12px;
  }
  .face img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    background: #fff;
  }
  .back { transform: rotateY(180deg); }
</style>
</head>
<body>

<div class="slideshow-wrap" id="wrap">
  <div class="top-bar">
    <div></div>
    <button id="flipBtn" class="btn" aria-label="Flip card (F or Space)">Flip</button>
    <div></div>

    <!-- Progress -->
    <div class="progress-wrap" aria-label="Progress">
      <div class="progress-rail" aria-hidden="true">
        <div class="progress-bar" id="progressBar"></div>
      </div>
      <div class="progress-text" id="progressText">Slide 1 / 14</div>
    </div>
  </div>

  <!-- Slides container -->
  <div id="slides"></div>

  <!-- Navigation -->
  <div class="nav prev" id="prevBtn" aria-label="Previous (←)">❮</div>
  <div class="nav next" id="nextBtn" aria-label="Next (→)">❯</div>
</div>

<script>
  // === CONFIG ===
  // We have 28 images: 01.jpg … 28.jpg (i.e., 14 flip-cards)
  const TOTAL_IMAGES = 28;

  // Build pairs
  const pairs = [];
  for (let i = 1; i <= TOTAL_IMAGES; i += 2) {
    const frontNum = String(i).padStart(2, '0');
    const backNum  = String(i + 1).padStart(2, '0');
    const hasBack = (i + 1) <= TOTAL_IMAGES;
    pairs.push({
      front: `${frontNum}.jpg`,
      back:  hasBack ? `${backNum}.jpg` : `${frontNum}.jpg`
    });
  }

  const slidesEl = document.getElementById('slides');

  // Create slides
  pairs.forEach((p, idx) => {
    const slide = document.createElement('div');
    slide.className = 'slide' + (idx === 0 ? ' active' : '');

    const card = document.createElement('div');
    card.className = 'card';
    card.dataset.flipped = 'false';

    const inner = document.createElement('div');
    inner.className = 'card-inner';

    const front = document.createElement('div');
    front.className = 'face front';
    front.innerHTML = `<img src="${p.front}" alt="Front ${idx+1}">`;

    const back = document.createElement('div');
    back.className = 'face back';
    back.innerHTML = `<img src="${p.back}" alt="Back ${idx+1}">`;

    inner.appendChild(front);
    inner.appendChild(back);
    card.appendChild(inner);
    slide.appendChild(card);
    slidesEl.appendChild(slide);
  });

  let slideIndex = 0;
  const totalSlides = pairs.length; // 14 for 28 images
  const slideNodes = () => Array.from(document.querySelectorAll('.slide'));

  const progressText = document.getElementById('progressText');
  const progressBar  = document.getElementById('progressBar');

  function updateProgress() {
    const current = slideIndex + 1;
    progressText.textContent = `Slide ${current} / ${totalSlides}`;
    const pct = (current - 1) / (totalSlides - 1) * 100;
    progressBar.style.width = `${Math.max(0, Math.min(100, pct))}%`;
  }

  function showSlide(i) {
    const slides = slideNodes();
    slides.forEach(s => s.classList.remove('active'));
    slideIndex = (i + slides.length) % slides.length;
    slides[slideIndex].classList.add('active');

    // reset flip
    const card = slides[slideIndex].querySelector('.card');
    card.classList.remove('flipped');
    card.dataset.flipped = 'false';

    updateProgress();
  }

  function flipCurrent() {
    const slide = slideNodes()[slideIndex];
    const card = slide.querySelector('.card');
    const isFlipped = card.dataset.flipped === 'true';
    card.dataset.flipped = String(!isFlipped);
    card.classList.toggle('flipped', !isFlipped);
  }

  // Buttons
  document.getElementById('flipBtn').addEventListener('click', flipCurrent);
  document.getElementById('prevBtn').addEventListener('click', () => showSlide(slideIndex - 1));
  document.getElementById('nextBtn').addEventListener('click', () => showSlide(slideIndex + 1));

  // Swipe
  const wrap = document.getElementById('wrap');
  let startX = 0;
  wrap.addEventListener('touchstart', e => { startX = e.touches[0].clientX; }, {passive:true});
  wrap.addEventListener('touchend', e => {
    const endX = e.changedTouches[0].clientX;
    const dx = endX - startX;
    if (Math.abs(dx) > 50) {
      if (dx < 0) showSlide(slideIndex + 1);
      else showSlide(slideIndex - 1);
    }
  });

  // Keyboard
  window.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowRight') showSlide(slideIndex + 1);
    if (e.key === 'ArrowLeft')  showSlide(slideIndex - 1);
    if (e.key.toLowerCase() === 'f' || e.key === ' ') flipCurrent();
  });

  // Start
  showSlide(0);
</script>
</body>
</html>
